<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  
  # Prevent Apache from automatically adding trailing slashes to directories
  # This prevents infinite loops when we redirect /about/ to /about
  DirectorySlash Off

  # Redirect trailing slashes to clean URLs (e.g. /about/ -> /about)
  # Only do this if it's a directory that corresponds to an HTML file
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^(.*)/$ /$1 [R=301,L]

  # Serve .html files for clean URLs (e.g. /about -> about.html)
  RewriteCond %{REQUEST_FILENAME}.html -f
  RewriteRule ^(.+)$ $1.html [L]
  
  # If the requested file or directory exists, serve it
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  
  # Otherwise fallback to index.html for client-side routing
  RewriteRule ^ index.html [L]
</IfModule>

# Disable directory listing
Options -Indexes

# Disable MultiViews
<IfModule mod_negotiation.c>
  Options -MultiViews
</IfModule>
